syntax = "proto3";

package core;

message ValidateOTAABrokerReq {
    bytes   AppEUI      = 1;
    string  NetAddress  = 2;
}

message ValidateOTAABrokerRes{}

message UpsertABPBrokerReq {
    bytes   AppEUI      = 1;
    string  NetAddress  = 2;
    bytes   DevAddr     = 3;
    bytes   NwkSKey     = 4;
}

message UpsertABPBrokerRes {}

message BrokerDevice {
    bytes   DevEUI      = 1;
    bytes   DevAddr     = 2;
    bytes   NwkSKey     = 3;
}

message ListDevicesBrokerReq {
    bytes   AppEUI      = 1;
}

message ListDevicesBrokerRes {
    repeated BrokerDevice Devices = 1;
}

service BrokerManager {
    rpc ValidateOTAA    (ValidateOTAABrokerReq)     returns     (ValidateOTAABrokerRes);
    rpc UpsertABP       (UpsertABPBrokerReq)        returns     (UpsertABPBrokerRes);
    rpc ListDevices     (ListDevicesBrokerReq)      returns     (ListDevicesBrokerRes);
}
